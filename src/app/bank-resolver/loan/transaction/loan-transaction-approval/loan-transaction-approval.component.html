<div class="row d-flex justify-content-center align-items-center"
  style="background-color: #78c2ad21; text-align: center;">
  <div class="col-xs-12 col-sm-12 col-md-11 col-lg-11 mb-2 bg-white p-1">
    <button type="button" [disabled]="undefined === selectedVm" class="btn btn-primary btn-sm ml-1 mr-1"
      (click)="onApproveClick()">Approve</button>
    <button type="button" class="btn btn-primary btn-sm ml-1 mr-1">Set Filter</button>
    <button type="button" class="btn btn-primary btn-sm ml-1 mr-1">Remove Filter</button>
    <button type="button" class="btn btn-primary btn-sm ml-1 mr-1" (click)="onClickRefreshList()">Refresh List</button>
    <button type="button" [disabled]="undefined === selectedVm" class="btn btn-primary btn-sm ml-1 mr-1"
      (click)="onDeleteClick()">Delete</button>
    <button type="button" [disabled]="undefined === selectedVm" class="btn btn-primary btn-sm ml-1 mr-1"
      (click)="openModal(kycContent)">Kyc</button>
    <button type="button" class="btn btn-primary btn-sm ml-1 mr-1" (click)="onBackClick()">Back</button>
  </div>
</div>
<loading *ngIf="isLoading"></loading>
<div class="row d-flex justify-content-center align-items-center"
  style="background-color: #78c2ad21; min-height: 90vh;">
  <div *ngIf="showMsg && showMsg.Show" class="col-xs-12 col-sm-12 col-md-11 col-lg-11 shadow mb-2 bg-white p-3">
    <div class="alert alert-dismissible fade show" role="alert" [ngClass]="{'alert-success': showMsg.Type === 0,
     'alert-warning':showMsg.Type === 1, 'alert-info':showMsg.Type === 2, 'alert-danger':showMsg.Type === 3 }">
      <strong>{{showMsg.Message}}</strong>
      <button type="button" class="close" data-dismiss="alert" (click)="showMsg = null" aria-label="Close">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
  </div>
  <div class="col-xs-12 col-sm-12 col-md-11 col-lg-11 shadow mb-2 bg-white p-3">
    <div class="row">
      <div class="col-6">
        <div class="row">
          <div class="col-12 ">
            <h6 style="background-color:lightskyblue">Unapproved Trasanction List</h6>
            <div class=" row">
              <label for="colFormLabelSm" class="col-4 col-form-label col-form-label-sm">Filter Account Type</label>
              <div class="col-4">
                <select id="title" class="form-control form-control-sm"
                  (change)="onChangeAcctType($event.target.value)">
                  <option *ngIf="uniqueAccTypes" selected value="-99">All</option>
                  <option *ngFor="let accType of uniqueAccTypes " [value]="accType.acc_type_cd">
                    {{accType.acc_type_cd +' ' +accType.acc_type_desc}}</option>
                </select>
              </div>
              <div class="custom-control form-control-sm custom-switch">
                <input type="checkbox" (change)="ShowOnlyRecovery($event.checked)" class="custom-control-input" id="customSwitch1">
                <label class="custom-control-label" for="customSwitch1">Recovery</label>
              </div>
            </div>
            <div class="table-responsive" class="scroll-when-long">
              <table class="table table-sm table-hover">
                <thead>
                  <tr>
                    <th scope="col">Tran Cd</th>
                    <th scope="col">Account</th>
                    <th scope="col">Amount</th>
                    <th scope="col">Acc Type</th>
                    <th scope="col">Tran Date</th>
                    <th scope="col">Tran Type</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let unApprovedTran of filteredVm" title="Click to Select" style="cursor: pointer;"
                    (click)="selectTransaction(unApprovedTran)"
                    [class.table-active]="unApprovedTran.td_def_trans_trf.trans_cd === selectedTransactionCd">
                    <td>{{unApprovedTran.td_def_trans_trf.trans_cd}}</td>
                    <td>{{unApprovedTran.td_def_trans_trf.acc_num}}</td>
                    <td>{{unApprovedTran.td_def_trans_trf.amount | number: '.2-2'}}</td>
                    <td>{{unApprovedTran.mm_acc_type.acc_type_desc}}</td>
                    <td>{{unApprovedTran.td_def_trans_trf.trans_dt}}</td>
                    <td>{{unApprovedTran.td_def_trans_trf.trans_type === 'R' ? 'Recovery' : 'Disbursement' }}</td>
                  </tr>
                </tbody>
              </table>
              <hr>
            </div>
          </div>
          <!-- <div class="col-12">
            <button type="button" class="btn btn-link" *ngIf="selectedAccountType === 6"
              (click)="openModal(content)">Show RD Installaments</button>
            <ng-template #content>
              <div class="modal-header">
                <h4 class="modal-title pull-left">RD Installments Details for Acc# {{selectedVm.tm_deposit.acc_num}}
                </h4>
                <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body">
                <app-dw-rd-instl-view></app-dw-rd-instl-view>
              </div>
            </ng-template>
            <app-dw-td-intt-dtls-view *ngIf="selectedAccountType === 2 || selectedAccountType === 5">
            </app-dw-td-intt-dtls-view>
            <app-dw-renewal-view *ngIf="selectedTransactionMode === 'R'"></app-dw-renewal-view>
          </div> -->
        </div>
      </div>
      <div class="col-6">
        <div class="12">
          <app-loan-transaction-details></app-loan-transaction-details>
          <hr>
        </div>
      </div>
    </div>
  </div>

</div>
<div class="row d-flex justify-content-center align-items-center"
  style="background-color: #78c2ad21; text-align: center;">
  <div class="col-xs-12 col-sm-12 col-md-11 col-lg-11 mb-2 bg-white p-1">
    <button type="button" [disabled]="undefined === selectedVm" class="btn btn-primary btn-sm ml-1 mr-1"
      (click)="onApproveClick()">Approve</button>
    <button type="button" class="btn btn-primary btn-sm ml-1 mr-1">Set Filter</button>
    <button type="button" class="btn btn-primary btn-sm ml-1 mr-1">Remove Filter</button>
    <button type="button" class="btn btn-primary btn-sm ml-1 mr-1" (click)="onClickRefreshList()">Refresh List</button>
    <button type="button" [disabled]="undefined === selectedVm" class="btn btn-primary btn-sm ml-1 mr-1"
      (click)="onDeleteClick()">Delete</button>
    <button type="button" [disabled]="undefined === selectedVm" class="btn btn-primary btn-sm ml-1 mr-1"
      (click)="openModal(kycContent)">Kyc</button>
    <button type="button" class="btn btn-primary btn-sm ml-1 mr-1" (click)="onBackClick()">Back</button>
  </div>
</div>

<ng-template #kycContent>
  <div class="modal-header">
    <h4 class="modal-title pull-left">KYC details for Acc# {{selectedVm.tm_deposit.acc_num}}
    </h4>
    <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <app-kyc></app-kyc>
  </div>
</ng-template>
